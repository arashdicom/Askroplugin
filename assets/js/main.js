/*! For license information please see main.js.LICENSE.txt */
!function(){var t,n={616:function(){},679:function(){},965:function(){function t(t,o){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var e,i,a,r,s=[],c=!0,l=!1;try{if(a=(o=o.call(t)).next,0===n){if(Object(o)!==o)return;c=!1}else for(;!(c=(e=a.call(o)).done)&&(s.push(e.value),s.length!==n);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=o.return&&(r=o.return(),Object(r)!==r))return}finally{if(l)throw i}}return s}}(t,o)||function(t,o){if(t){if("string"==typeof t)return n(t,o);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,o):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,e=Array(n);o<n;o++)e[o]=t[o];return e}!function(n){"use strict";window.Askro={config:{ajaxUrl:askroAjax.ajax_url||"",nonce:askroAjax.nonce||"",currentUser:askroAjax.current_user||0,isLoggedIn:askroAjax.is_logged_in||!1,strings:askroAjax.strings||{}},init:function(){this.bindEvents(),this.initComponents(),this.loadSavedPreferences()},bindEvents:function(){n(document).ready(this.onDocumentReady.bind(this)),n(window).on("load",this.onWindowLoad.bind(this)),n(window).on("resize",this.onWindowResize.bind(this))},onDocumentReady:function(){this.initVoting(),this.initForms(),this.initModals(),this.initTooltips(),this.initLazyLoading()},onWindowLoad:function(){this.initAnimations(),this.preloadCriticalAssets()},onWindowResize:function(){this.handleResponsiveElements()},initComponents:function(){void 0!==this.Voting&&this.Voting.init(),void 0!==this.Forms&&this.Forms.init(),void 0!==this.Comments&&this.Comments.init(),void 0!==this.Search&&this.Search.init()},initVoting:function(){n(".askro-vote-button").on("click",this.handleVote.bind(this))},handleVote:function(t){t.preventDefault();var o=n(t.currentTarget),e=o.data("post-id"),i=o.data("vote-type"),a=o.data("vote-strength")||1;this.config.isLoggedIn?(o.prop("disabled",!0),n.ajax({url:this.config.ajaxUrl,type:"POST",data:{action:"askro_vote",nonce:this.config.nonce,post_id:e,vote_type:i,vote_strength:a},success:function(t){t.success?(this.updateVoteDisplay(o,t.data),this.showNotification(t.data.message,"success")):this.showNotification(t.data.message,"error")}.bind(this),error:function(){this.showNotification(this.config.strings.vote_error,"error")}.bind(this),complete:function(){o.prop("disabled",!1)}})):this.showLoginPrompt()},updateVoteDisplay:function(t,n){var o=t.closest(".askro-vote-container");o.find(".askro-vote-count").text(n.total_votes),o.find(".askro-vote-button").removeClass("active"),n.user_vote&&t.addClass("active"),t.addClass("askro-pulse-slow"),setTimeout(function(){t.removeClass("askro-pulse-slow")},1e3)},initForms:function(){this.initAutoSave(),this.initFormValidation(),this.initFileUploads(),this.initTagInputs()},initFormValidation:function(){n(".askme-form").on("submit",function(t){const s=n(this);let o=!0;s.find(".askme-form-error").remove(),s.find(".askme-input-error").removeClass("askme-input-error"),s.find("[required]").each(function(){const t=n(this),s=t.val().trim();if(!s){o=!1,t.addClass("askme-input-error");const n=t.data("error-message")||"هذا الحقل مطلوب";t.after('<div class="askme-form-error">'+n+"</div>")}}),s.find('input[type="email"]').each(function(){const t=n(this),s=t.val().trim();if(s&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){o=!1,t.addClass("askme-input-error"),t.after('<div class="askme-form-error">يرجى إدخال بريد إلكتروني صحيح</div>')}}),o||(t.preventDefault(),Askro.showNotification("يرجى تصحيح الأخطاء في النموذج","error"))})},initAutoSave:function(){n(".askro-auto-save").each(function(){var t=n(this),o=t.data("form-id");if(o){var e=localStorage.getItem("askro_draft_"+o);if(e)try{var i=JSON.parse(e);Object.keys(i).forEach(function(n){var o=t.find('[name="'+n+'"]');o.length&&o.val(i[n])})}catch(t){console.warn("Failed to load saved form data:",t)}t.on("input change","input, textarea, select",function(){clearTimeout(t.data("saveTimeout")),t.data("saveTimeout",setTimeout(function(){Askro.saveFormDraft(t,o)},2e3))})}})},saveFormDraft:function(t,o){var e={};t.find("input, textarea, select").each(function(){var t=n(this),o=t.attr("name");o&&t.val()&&(e[o]=t.val())}),localStorage.setItem("askro_draft_"+o,JSON.stringify(e)),this.showNotification(this.config.strings.draft_saved,"info",2e3)},initFileUploads:function(){n(".askro-file-upload").each(function(){var t=n(this),o=t.find('input[type="file"]'),e=t.find(".askro-file-preview");t.on("dragover dragenter",function(n){n.preventDefault(),t.addClass("askro-drag-over")}),t.on("dragleave dragend drop",function(n){n.preventDefault(),t.removeClass("askro-drag-over")}),t.on("drop",function(t){t.preventDefault();var n=t.originalEvent.dataTransfer.files;n.length>0&&(o[0].files=n,Askro.handleFilePreview(o[0],e))}),o.on("change",function(){Askro.handleFilePreview(this,e)})})},handleFilePreview:function(t,o){o.empty(),Array.from(t.files).forEach(function(t){var e=new FileReader;e.onload=function(e){var i=n('<div class="askro-preview-item"></div>');t.type.startsWith("image/")?i.html('\n                            <img src="'.concat(e.target.result,'" alt="').concat(t.name,'" class="askro-preview-image">\n                            <span class="askro-preview-name">').concat(t.name,"</span>\n                        ")):i.html('\n                            <div class="askro-preview-file">\n                                <span class="askro-file-icon">📄</span>\n                                <span class="askro-preview-name">'.concat(t.name,"</span>\n                            </div>\n                        ")),o.append(i)},e.readAsDataURL(t)})},initTagInputs:function(){"undefined"!=typeof Tagify&&n(".askro-tag-input").each(function(){var t=n(this).data("suggestions")||[];new Tagify(this,{whitelist:t,maxTags:10,dropdown:{maxItems:20,classname:"askro-tags-dropdown",enabled:0,closeOnSelect:!1}})})},initModals:function(){n(document).on("click","[data-askro-modal]",function(t){t.preventDefault();var o=n(this).data("askro-modal");Askro.openModal(o)}),n(document).on("click",".askro-modal-close, .askro-modal-backdrop",function(t){t.target===this&&Askro.closeModal()}),n(document).on("keydown",function(t){"Escape"===t.key&&Askro.closeModal()})},openModal:function(t){var o=n("#"+t);o.length&&(o.removeClass("askro-hidden").addClass("askro-fade-in"),n("body").addClass("askro-modal-open"))},closeModal:function(){n(".askro-modal").addClass("askro-hidden").removeClass("askro-fade-in"),n("body").removeClass("askro-modal-open")},initTooltips:function(){n("[data-askro-tooltip]").each(function(){var t=n(this),o=t.data("askro-tooltip");t.on("mouseenter",function(){Askro.showTooltip(t,o)}),t.on("mouseleave",function(){Askro.hideTooltip()})})},showTooltip:function(t,o){var e=n('<div class="askro-tooltip">'+o+"</div>");n("body").append(e);var i=t.offset(),a=t.outerHeight();e.css({top:i.top+a+5,left:i.left+t.outerWidth()/2-e.outerWidth()/2}),e.addClass("askro-fade-in")},hideTooltip:function(){n(".askro-tooltip").remove()},initLazyLoading:function(){if("IntersectionObserver"in window){var t=new IntersectionObserver(function(n,o){n.forEach(function(n){if(n.isIntersecting){var o=n.target;o.src=o.dataset.src,o.classList.remove("askro-lazy"),t.unobserve(o)}})});document.querySelectorAll("img[data-src]").forEach(function(n){t.observe(n)})}},initAnimations:function(){if("undefined"!=typeof anime){var t=new IntersectionObserver(function(o){o.forEach(function(o){if(o.isIntersecting){n(o.target).data("animation");anime({targets:o.target,opacity:[0,1],translateY:[20,0],duration:600,easing:"easeOutQuad"}),t.unobserve(o.target)}})});document.querySelectorAll(".askro-animate-on-scroll").forEach(function(n){t.observe(n)})}},showNotification:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;if("undefined"!=typeof toastr)toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:e,extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr[o](t);else{var i=n('\n                    <div class="askro-notification askro-notification-'.concat(o,'">\n                        ').concat(t,'\n                        <button class="askro-notification-close">&times;</button>\n                    </div>\n                '));n("body").append(i),setTimeout(function(){i.addClass("askro-fade-in")},100),setTimeout(function(){i.remove()},e),i.on("click",".askro-notification-close",function(){i.remove()})}},showLoginPrompt:function(){this.showNotification(this.config.strings.login_required,"warning")},loadSavedPreferences:function(){var t=localStorage.getItem("askro_theme");t&&n("body").attr("data-theme",t);var o=localStorage.getItem("askro_preferences");if(o)try{var e=JSON.parse(o);this.applyPreferences(e)}catch(t){console.warn("Failed to load preferences:",t)}},applyPreferences:function(t){t.defaultSort&&n('.askro-sort-button[data-sort="'+t.defaultSort+'"]').addClass("active"),t.defaultView&&n('.askro-view-toggle[data-view="'+t.defaultView+'"]').addClass("active")},handleResponsiveElements:function(){n(window).width()<768?(n(".askro-desktop-only").hide(),n(".askro-mobile-only").show()):(n(".askro-desktop-only").show(),n(".askro-mobile-only").hide())},preloadCriticalAssets:function(){[askroAjax.plugin_url+"assets/images/logo.png",askroAjax.plugin_url+"assets/images/default-avatar.png"].forEach(function(t){(new Image).src=t})},utils:{debounce:function(t,n,o){var e;return function(){var i=this,a=arguments,r=o&&!e;clearTimeout(e),e=setTimeout(function(){e=null,o||t.apply(i,a)},n),r&&t.apply(i,a)}},throttle:function(t,n){var o;return function(){var e=arguments;o||(t.apply(this,e),o=!0,setTimeout(function(){return o=!1},n))}},formatNumber:function(t){return t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString()},timeAgo:function(n){for(var o=new Date,e=Math.floor((o-new Date(n))/1e3),i=0,a=Object.entries({year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60});i<a.length;i++){var r=t(a[i],2),s=r[0],c=r[1],l=Math.floor(e/c);if(l>=1)return l+" "+s+(l>1?"s":"")+" ago"}return"just now"}}},n(document).ready(function(){Askro.init()})}(jQuery)}},o={};function e(t){var i=o[t];if(void 0!==i)return i.exports;var a=o[t]={exports:{}};return n[t](a,a.exports,e),a.exports}e.m=n,t=[],e.O=function(n,o,i,a){if(!o){var r=1/0;for(u=0;u<t.length;u++){o=t[u][0],i=t[u][1],a=t[u][2];for(var s=!0,c=0;c<o.length;c++)(!1&a||r>=a)&&Object.keys(e.O).every(function(t){return e.O[t](o[c])})?o.splice(c--,1):(s=!1,a<r&&(r=a));if(s){t.splice(u--,1);var l=i();void 0!==l&&(n=l)}}return n}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[o,i,a]},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},function(){var t={829:0,364:0,266:0};e.O.j=function(n){return 0===t[n]};var n=function(n,o){var i,a,r=o[0],s=o[1],c=o[2],l=0;if(r.some(function(n){return 0!==t[n]})){for(i in s)e.o(s,i)&&(e.m[i]=s[i]);if(c)var u=c(e)}for(n&&n(o);l<r.length;l++)a=r[l],e.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return e.O(u)},o=self.webpackChunkaskro=self.webpackChunkaskro||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}(),e.O(void 0,[364,266],function(){return e(965)}),e.O(void 0,[364,266],function(){return e(616)});var i=e.O(void 0,[364,266],function(){return e(679)});i=e.O(i)}();
